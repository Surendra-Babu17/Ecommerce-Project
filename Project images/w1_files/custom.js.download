CJSAPPS_ARR=["163","243","464","709","523","339","758","733"],CJSAPPS_PARENT={},CJSAPPS_PARENT[163]={},CJSAPPS_PARENT[243]={},CJSAPPS_PARENT[464]={},CJSAPPS_PARENT[464].AfterDocReady=function(e,t,n,r,a){DIGIOH_CUSTOM_JS.log;try{const i="tpau_proxy_integration_id",s="tpau_pageview_event",l="tpau_pageview_json",c="tpau_userid_field",g="tpau_userid_source_var",u="tpau_hide_url_params",d="digioh_session",p="tpau_session_errors",f=10,m=/^https:\/\//i,y=["getTrackingAppName","getLookupProxyEndpoint","getTrackEventProxyEndpoint","getPlatformAppHelpUrl","getMergeTagName","getPlatformSdkEmailIdentity","getPlatformSdkUserIdIdentity","setPlatformSdkIdentity"];function o(){return!!e.isProxyEnabled()||(e.tpauTrackAndNotifyError("Must configure account metadata "+i+" to use this app",e.FATAL_ERROR),!1)}e.FATAL_ERROR=1,e.RECOVERABLE_ERROR=2,e.CLEAR_ALL=1,e.RETAIN_QUEUE=2,e.PLATFORM_SDK_IDENTIFY_NOOP=1,e.PLATFORM_SDK_IDENTIFY_REPLACED=2,e.PLATFORM_SDK_IDENTIFY_NEW=3,e.PLATFORM_SDK_IDENTIFY_FAIL=4,e.getProxyIntegrationId=function(t=!0){let n=e.getAccountMetadata(i+":"+e.getHostname());if(n)t||e.tpauNotify(`Site-specific ${e.getTrackingAppName()} ${i}:${n} for ${e.getHostname()}`);else{if(n=e.getAccountMetadata(i),!n)return void(t||e.tpauNotifyError(`${e.getTrackingAppName()} TPAU App requires account metadata <strong>${i}</strong>`));t||e.tpauNotify(`Account-level ${e.getTrackingAppName()} ${i}:${n}`)}return n},e.getTrackPvEventName=function(){const t=e.getAccountMetadata(s);return t||void 0},e.getTrackPvJson=function(){return e.getAccountMetadata(l)||JSON.stringify({page_path:e.getPagePath()})},e.tpauOpenBoxes=[],e.registerOpenBox=function(t){e.tpauOpenBoxes.push(t)},e.processOpenBoxesMergeTags=function(){for(const t of e.tpauOpenBoxes)"function"==typeof t.populateMergeTags&&t.populateMergeTags()},e.tpauNotify=function(t,r){if(!e.tpauNotifier){const t="function"==typeof e.getTrackingAppName?e.getTrackingAppName()+" TPAU":"TPAU";e.tpauNotifier=e.initAppNotifications(t)}const a=e.tpauNotifier;let o="info";if(r?r===e.errorNotifyApp?(a.errorNotifyApp(t),o="error"):r===e.warnNotifyApp?(a.warnNotifyApp(t),o="warn"):r(t):a.infoNotifyApp(t),e._notifyConsole){let r=n.createElement("div");r.innerHTML="&gt;&nbsp;"+t,r.className="notify-"+o,e._notifyConsole.appendChild(r),e._notifyConsole.scrollTop=e._notifyConsole.scrollHeight}},e.tpauNotifyError=function(t){e.tpauNotify(t,e.errorNotifyApp)},e.tpauNotifyWarn=function(t){e.tpauNotify(t,e.warnNotifyApp)},e.tpauTrackAndNotifyError=function(t,n=e.RECOVERABLE_ERROR){t=t||"",n==e.FATAL_ERROR&&(t+=" (fatal)",e.tpauFatalError=!0),e.tpauNotifyError(t);let r=sessionStorage.getItem(p)||"{}";if(r=JSON.parse(r),!r[t]){const n={digioh_tpau_error_detail:t};e.tpauGa4Track("digioh_tpau_error",n)}r[t]=!0,sessionStorage.setItem(p,JSON.stringify(r))},e.getTargetableObjectName=function(){return"tpau"},e.getUniqueIdName=function(){return"userId"},e.tpauGa4Track=function(t,n){if(n=n||{},!t)return void e.tpauNotifyError("api.tpauGa4Track expects eventName param");let r="undefined"!=typeof boxapi?boxapi:e;"function"==typeof r.ga4Track?r.ga4Track(t,n):"function"==typeof r.trackEvent&&r.trackEvent(t,n)},e.validateConfig=function(){e.tpauNotify("Configuration:");for(const t of y)"function"!=typeof e[t]&&e.tpauTrackAndNotifyError(`Platform app must implement api.${t}`,e.FATAL_ERROR);m.test(e.getLookupProxyEndpoint())||e.tpauTrackAndNotifyError("Invalid User Lookup Proxy URL "+e.getLookupProxyEndpoint(),e.FATAL_ERROR),m.test(e.getTrackEventProxyEndpoint())||e.tpauTrackAndNotifyError("Invalid Track Event Proxy URL "+e.getTrackEventProxyEndpoint(),e.FATAL_ERROR);e.getProxyIntegrationId(!1);const t=e.tpauGetUserIdFieldName();/^custom_\d{1,3}$/.test(t)?e.tpauNotify(`UserId Submit injection config ${c}:${t}`):e.tpauTrackAndNotifyError(`Invalid ${c}:${t}`,e.FATAL_ERROR);const n=e.getAccountMetadata(g)||"(none)";e.tpauNotify(`UserId JS Var ${g}:${n}`)},e.resetTargetableObject=function(n=!1){const r=e.getTargetableObjectName(),a={lists:void 0,segments:void 0};return a.known=!!n&&void 0,a.unknown=!n||void 0,t[r]=a,e[r]=a,a},e.getTargetableObject=function(){const n=e.getTargetableObjectName();return"object"!=typeof t[n]&&e.resetTargetableObject(),t[n]},e.isProxyEnabled=function(){return!!e.getProxyIntegrationId(!0)},e.validateEventPayloadJson=function(t,n){try{JSON.parse(t)}catch(r){return e.tpauNotifyError("Invalid "+n+":"+t+":"+r.toString()),!1}return!0},e.formatUserDataHtml=function(e){let t="<ul>";for(const n of Object.keys(e)){if("emailListIds"==n)continue;if("omtrInternal"==n)continue;if("unsubscribedChannelIds"==n)continue;if("subscribedMessageTypeIds"==n)continue;if("unsubscribedMessageTypeIds"==n)continue;if("eventQueue"==n)continue;let r=e[n];"object"==typeof r&&null!==r&&(r=JSON.stringify(r,null,2)),t+="<li><strong>"+n+"</strong>:"+r+"</li>"}const n=e.emailListIds||[];for(const e of n)t+="<li>lists.<strong>"+e+"</strong>:true</li>";return t+="</ul>",t},e.validateStandardProfile=function(e){return(!!e.id||!!e.email||!!e.userId)&&!!e.profile&&!!e.lists&&!!e.segments&&Array.isArray(e.lists)&&Array.isArray(e.segments)},e.processSetPlatformSdkIdentity=function(t,n){const r=e.setPlatformSdkIdentity(t,n);switch(r){case e.PLATFORM_SDK_IDENTIFY_NOOP:break;case e.PLATFORM_SDK_IDENTIFY_REPLACED:e.tpauGa4Track("digioh_tpau_replaced_sdk_id"),e.tpauNotifyWarn("Replaced "+e.getTrackingAppName()+" SDK ID with "+t);break;case e.PLATFORM_SDK_IDENTIFY_NEW:e.tpauGa4Track("digioh_tpau_identified_to_sdk"),e.tpauNotify("Identified "+(t||n)+" to "+e.getTrackingAppName()+" SDK");break;case e.PLATFORM_SDK_IDENTIFY_FAIL:e.tpauTrackAndNotifyError("Failed to set identity with "+e.getTrackingAppName()+" SDK",e.RECOVERABLE_ERROR);break;default:e.tpauTrackAndNotifyError("Unexpected response from api.setPlatformSdkIdentity: "+r,e.RECOVERABLE_ERROR)}},e.getUserAsync=function(t,n){if(!o())return;if(e.failTrack=e.failTrack||{},e.failTrack[t]>1)return void e.tpauNotifyError("Aborting proxy call due to failures");const a={url:t,dataType:"jsonp"};e.isDebug()||(a.timeout=4e3),r.ajax(a).done((function(r){try{const a=function(a,o=void 0){if(e.failTrack[t]=e.failTrack[t]||0,e.failTrack[t]++,e.processOpenBoxesMergeTags(),n){const t=r.error||"not found in "+e.getTrackingAppName();e.tpauGa4Track(n+"_fail",{digioh_tpau_error_detail:t})}o?(/429 rate limited/.test(a)&&(a=/expiring/.test(a)?"429 Proxy Mitigated":"429 Actual"),e.tpauTrackAndNotifyError(a,o),o==e.FATAL_ERROR&&e.clearData()):e.tpauNotifyError(a)};if("string"==typeof r&&(r.startsWith("(")&&r.endsWith(");")&&(r=r.substring(1,r.length-2)),r=JSON.parse(r)),!r.hasOwnProperty("success"))return void a('TPAU expects standard proxy response {success:true|false, error:"", payload:{...}}; got '+JSON.stringify(r),e.FATAL_ERROR);let o,i=r.payload;if((!i||Array.isArray(i)&&0==i.length||0==Object.keys(i).length||"object"!=typeof i)&&(r.success=!1),!r.success)return void a("Did <strong>not</strong> find "+e.getTrackingAppName()+" User"+(r.error?": "+r.error:""));if("function"==typeof e.standardizeGetUserApiResponse){try{o=e.standardizeGetUserApiResponse(r.payload)}catch(t){return a("Exception from api.standardizeGetUserApiResponse",e.FATAL_ERROR),void e.clearData()}if("string"==typeof o){return void a(o,e.RECOVERABLE_ERROR)}if(!e.validateStandardProfile(o))return void a("Invalid result from api.standardizeGetUserApiResponse",e.FATAL_ERROR);e.storeProfile(o)}else o=r,e.storeProfile(o);e.processSetPlatformSdkIdentity(o.id,o.email),n&&e.tpauGa4Track(n),e.processQueuedEvents(),e.generateTargetableAttributes(),e.reload(),e.processOpenBoxesMergeTags()}catch(t){e.tpauTrackAndNotifyError("Exception in getUserAsync: "+t.toString(),e.FATAL_ERROR)}})).fail((function(t,r,a){e.tpauNotifyError(e.getTrackingAppName()+" API error getting user: "+r),e.processOpenBoxesMergeTags(),n&&e.tpauGa4Track(n+"_api_error")}))},e.isEqualIdentity=function(e,t){return!(!e&&!t)&&(t=t||"",(e=e||"").toString().trim().toLowerCase()==t.toString().trim().toLowerCase())},e.identifyPreProcess=function(t,n){if(!t)return e.tpauTrackAndNotifyError("api."+n+": missing id parameter",e.RECOVERABLE_ERROR),!1;if(e.isEqualIdentity(e.getUserId(),t)||e.isEqualIdentity(e.getEmail(),t)){if(e.getProfile())return e.tpauNotify(`Known ${e.getTrackingAppName()} user with cached profile: ${t}`),!1;e.tpauNotify(`Fetching ${e.getTrackingAppName()} profile for known user: ${t}`)}else if(e.isKnown()){const n=e.getEmail()||e.getUserId()||"unknown";e.tpauNotify("Replacing Digioh identity "+n+" with "+t),e.clearData(e.CLEAR_ALL)}else e.tpauNotify("Setting Digioh identity to "+e.getUniqueIdName()+" "+t);return!0},e.identifyUserByUserId=function(t,n){if(e.identifyPreProcess(t,"identifyUserByUserId")){e.storeUserId(t);const r=e.getLookupProxyEndpoint(t);e.getUserAsync(r,n)}},e.identifyUserByEmail=function(t,n){if(e.identifyPreProcess(t,"identifyUserByEmail")){e.storeEmail(t);const r=e.getLookupProxyEndpoint(t);e.getUserAsync(r,n)}},e.storeProfile=function(n){n.email&&e.storeEmail(n.email),(n.id||n.userId)&&e.storeUserId(n.id||n.userId);const r=JSON.stringify(n),a=e.LIGHTBOX.LZString.compressToBase64(r);t.sessionStorage.setItem(e.getTargetableObjectName(),a),e.tpauNotify("Stored "+e.getTrackingAppName()+" user profile in sessionStorage")},e.getProfile=function(){const n=t.sessionStorage.getItem(e.getTargetableObjectName());return n?/^\s*\{/.test(n)?JSON.parse(n):JSON.parse(e.LIGHTBOX.LZString.decompressFromBase64(n)):null},e.getEmail=function(){let n=t.localStorage.getItem("_em");if(n)n=e.LIGHTBOX.LZString.decompressFromBase64(n);else{n=(e.getProfile()||{}).email}return n||""},e.identifyByEmailCustom=function(t){e.identifyUserByEmail(t,"digioh_tpau_identified_by_custom")},e.setEmailCustom=function(t){e.identifyByEmailCustom(t)},e.identifyByUserIdCustom=function(t){e.identifyUserByUserId(t,"digioh_tpau_identified_by_custom")},e.setUserIdCustom=function(t){e.identifyByUserIdCustom(t)},e.getUserId=function(){return t.localStorage.getItem("_uid")},e.storeEmail=function(n){n?t.localStorage.setItem("_em",e.LIGHTBOX.LZString.compressToBase64(n)):t.localStorage.removeItem("_em")},e.storeUserId=function(e){e?t.localStorage.setItem("_uid",e):t.localStorage.removeItem("_uid")},e.isKnown=function(){return!!e.getEmail()||!!e.getUserId()},e.processPageview=function(){const t=e.getTrackPvEventName();if(!!!t)return;const n=e.getProfile()?e.trackPlatformEvent:e.queueEvent;let r,a=e.getTrackPvJson();if(a){/\[\S+\]/.test(a)&&("function"!=typeof e.replaceMergeTagsInString?e.tpauNotifyWarn("Box "+e.getBoxID()+" has ["+e.getMergeTagName()+"*]merge tags, but UMT app not installed ([https://help.digioh.com/knowledgebase/digioh-universal-merge-tags/%7Chelp doc]"):a=e.replaceMergeTagsInString(a));try{r=JSON.parse(a)}catch(n){return void e.tpauTrackAndNotifyError("Error parsing JSON for "+t,e.FATAL_ERROR)}n(t,r,{notificationContext:"pageview"})}},e.sendBoxPageEvent=function(t,n){(e.getProfile()?e.trackPlatformEvent:e.queueEvent)(t,n,{notificationContext:"box"})},e.setEventQueue=function(e){"object"==typeof e&&(e=JSON.stringify(e)),t.localStorage.setItem("_eq",e)},e.getEventQueue=function(){const e=t.localStorage.getItem("_eq")||"[]";return JSON.parse(e)},e.resetEventQueue=function(){t.localStorage.removeItem("_eq")},e.getProxyCompatibleEventTimestamp=function(){return(new Date).getTime().toString()},e.queueEvent=function(t,n,r){r||(r={}),r.notificationContext||(r.notificationContext=""),r.createdAt=e.getProxyCompatibleEventTimestamp();const a={eventName:t,payloadObj:n,options:r},o=e.getEventQueue()||[];o.push(a),e.setEventQueue(o),e.tpauNotify("Queued "+r.notificationContext+" event <strong>"+t+"</strong>"+e.formatUserDataHtml(n))},e.processQueuedEvents=function(){const t=e.getEventQueue();if(t.length){e.tpauNotifyWarn("Tracking queued events to "+e.getTrackingAppName());let n=0;for(;t.length>0&&n<=f;){const r=t.pop(),a=r.eventName,o=r.payloadObj,i=r.options;e.trackPlatformEvent(a,o,i),n++}}e.setEventQueue(t)},e.trackPlatformEvent=function(t,n,a=null){if(!o())return;const i=e.createPlatformEventProxyPayload(t,n,a),s={dataType:"jsonp",url:e.getTrackEventProxyEndpoint(i),success:function(r){const o=a&&a.notificationContext?" "+a.notificationContext:"";if(r.success)switch(e.tpauNotify("Tracked"+o+" event <strong>"+t+"</strong>"+e.formatUserDataHtml(n)),o.trim()){case"box":e.tpauGa4Track("digioh_tpau_box_event");break;case"pageview":e.tpauGa4Track("digioh_tpau_pageview_event")}else e.tpauNotifyError("Error tracking "+o+" event <strong>"+t+"</strong>: "+r.error)},error:function(t,n,r){e.tpauNotifyError(e.getTrackingAppName()+" TPAU API error tracking event: "+n)}};e.isDebug()||(s.timeout=3e3),r.ajax(s)},e.clearData=function(n){t.sessionStorage.removeItem(e.getTargetableObjectName()),t.sessionStorage.removeItem(d),sessionStorage.removeItem(p),e.storeEmail(null),e.storeUserId(null),t[e.getTargetableObjectName()]={known:!1,unknown:!0},e[e.getTargetableObjectName()]=t[e.getTargetableObjectName()],e.tpauNotify("Cleared "+e.getTrackingAppName()+" user profile"),n&&e.getEventQueue().length>0&&(e.resetEventQueue(),e.tpauNotify("Cleared "+e.getTrackingAppName()+" queued events"))},e.generateTargetableAttributes=function(){let t=e.getProfile();if(!t)return e.resetTargetableObject(),void e.tpauTrackAndNotifyError("generateTargetableAttributes: can't with no profile",e.RECOVERABLE_ERROR);const n=t.profile,r=t.email,a=t.id,o=t.lists,i=t.segments;let s;if("object"!=typeof n&&(s="generateTargetableAttributes: invalid profile structure, expected profile property"),r||a||(s="generateTargetableAttributes: invalid profile, missing both .email and .id (need one)"),o&&!Array.isArray(o)&&(s="generateTargetableAttributes: TPAU Core expected profile.lists as array, bad standard profile format"),i&&!Array.isArray(i)&&(s="generateTargetableAttributes: TPAU Core expected profile.segments as array, bad standard profile format"),s)return e.resetTargetableObject(!0),void e.tpauTrackAndNotifyError(s,e.FATAL_ERROR);const l=e.resetTargetableObject();l.known=!0,l.unknown=!1,l.lists={},l.segments={};let c=0,g=0,u=0;const d=["lists","segments","email","id"],p=[/^\s*null\s*$/,/^\s*undefined\s*$/,/^\s+$/],f=function(e){return p.filter((t=>t.test(e)))};for(const e of Object.keys(n)){const t=n[e];!d.includes(e)&&f(t)&&(l[e]=t,c++)}if(o)for(const e of o)l.lists[e]=!0,g++;if(i)for(const e of i)l.segments[e]=!0,u++;const m=e.getTargetableObjectName();let y="Generated Targetable Object:<ul>";y+="<li>window.<strong>"+m+"</strong>: "+c+" profile attributes</li>",y+="<li>window."+m+".<strong>lists</strong>: "+g+" list IDs</li>",y+="<li>window."+m+".<strong>segments</strong>: "+u+" segment IDs</li>",y+="</ul>",e.tpauNotify(y)},e.createPlatformEventProxyPayload=function(t,n,r=null){if(!e.isKnown())return e.tpauTrackAndNotifyError("Can't createPlatformEventProxyPayload for unknown user",e.FATAL_ERROR),{};const a={payload:n};return e.getUserId()&&(a.userId=e.getUserId()),e.getEmail()&&(a.email=e.getEmail()),a.eventName=t,r&&(r.updateEventId&&(a.updateEventId=r.updateEventId),r.createdAt&&(a.createdAt=r.createdAt)),a},e.tpauMergeProps=function(e,t,n){if("object"==typeof e)for(const r of Object.keys(e)){const a=e[r],o=n?n+"_"+r:r;null==a||"object"==typeof a||t[o]||(t[o]=a)}},e.initDialog=function(){if(!e.isQaMode())return;if(e.isMobile())return void e.warnNotifyApp("TPAU Diagnostics not available on mobile devices");const a=n.createElement("div");a.id="digiohDialog";const o=a.attachShadow({mode:"open"}),i=n.createElement("style");i.textContent="\n      /* Hide SVG definition container */\n      svg.hidden {\n          display: none;\n      }\n      \n      /* Main container for the control panel */\n      #digiohIterableController {\n          position: fixed;\n          top: 10px;\n          left: 10px;\n          z-index: 999999;\n          padding: 12px;\n          text-align: center;\n          background-color: #f9f9f9;\n          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n          border-radius: 8px;\n          font-family: Arial, sans-serif;\n      }\n      \n      /* Close button styles */\n      .digiohCloseButton {\n          position: absolute;\n          top: 8px;\n          right: 8px;\n          padding: 3px;\n          font-weight: bold;\n          color: black;\n          cursor: pointer;\n      }\n      \n      /* Header styles */\n      #digiohIterableController h1 {\n          font-size: 16px;\n          font-weight: bold;\n          margin-bottom: 10px;\n      }\n      \n      /* Data row styling */\n      .dataRow {\n          font-size: 14px;\n          margin-bottom: 10px;\n      }\n      \n      /* Copy icon styling */\n      svg.copyIcon {\n          width: 15px;\n          height: 15px;\n          cursor: pointer;\n      }\n      \n      /* Button common styles */\n      #digiohIterableController button {\n          padding: 6px 12px;\n          height: 44px;\n          font-size: 12px;\n          font-weight: bold;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          margin-right: 5px;\n      }\n      \n      /* Specific button background and text colors */\n      #digiohTestConnection {\n          background-color: purple;\n          color: white;\n      }\n      #digiohForgetUser {\n          background-color: #f44336;\n          color: white;\n      }\n      #digiohShowUserData {\n          background-color: #3f51b5;\n          color: white;\n      }\n      \n      /* Input and Identify button styling */\n      #digiohEmailOrUserid {\n          height: 44px;\n          width: 200px;\n          /*padding: 10px;*/\n          border: 1px solid #ccc;\n          border-radius: 4px;\n          vertical-align: middle;\n      }\n      #digiohIdentifyUser {\n          height: 44px;\n          padding: 6px 12px;\n          font-size: 12px;\n          font-weight: bold;\n          border: none;\n          border-radius: 4px;\n          background-color: #4CAF50;\n          color: white;\n          cursor: pointer;\n          vertical-align: middle;\n      }\n      \n      /* Notification console styling */\n      #digiohConsole {\n          margin-top: 10px;\n          max-height: 200px;\n          max-width: 650px;\n          overflow-y: auto;\n          background-color: #333;\n          color: #eee;\n          font-family: monospace;\n          font-size: 12px;\n          padding: 5px;\n          text-align: left;\n          border-radius: 4px;\n      }\n      \n      #digiohConsole a {\n          color: white !important;\n          text-decoration: underline;\n      }\n\n      /* Notification message colors */\n      .notify-info { color: #eee; }\n      .notify-error { color: red; }\n      .notify-warn { color: orange; }\n    ",o.appendChild(i);const s=`\n      <svg width="0" height="0" class="hidden" xmlns="http://www.w3.org/2000/svg">\n        <defs>\n          <g id="tpau-clipboard">\n            <path d="M30.731 8.16c-0.005-0.035-0.011-0.066-0.019-0.095l0.001 0.005c-0.031-0.134-0.094-0.249-0.182-0.342l0 0-6.297-6.296c-0.093-0.087-0.208-0.15-0.336-0.181l-0.005-0.001c-0.026-0.008-0.058-0.014-0.091-0.019l-0.004-0c-0.026-0.007-0.059-0.014-0.092-0.018l-0.004-0h-9.445c-0.414 0-0.75 0.336-0.75 0.75v0 22.038c0 0.414 0.336 0.75 0.75 0.75h15.742c0.414-0 0.75-0.336 0.75-0.75v0-15.742c-0.005-0.038-0.012-0.071-0.020-0.103l0.001 0.005zM24.453 3.773l3.736 3.735h-3.736zM15.008 23.25v-20.538h7.945v5.546c0 0.414 0.336 0.75 0.75 0.75h5.547v14.242zM17.742 27.25c-0.414 0-0.75 0.336-0.75 0.75v0 1.27h-14.242v-20.539h7.25c0.414 0 0.75-0.336 0.75-0.75s-0.336-0.75-0.75-0.75v0h-8c-0.414 0-0.75 0.336-0.75 0.75v0 22.039c0 0.414 0.336 0.75 0.75 0.75h15.742c0.414-0 0.75-0.336 0.75-0.75v0-2.020c-0-0.414-0.336-0.75-0.75-0.75v0z"></path>\n          </g>\n        </defs>\n      </svg>\n      <div id="digiohIterableController">\n        <div class="digiohCloseButton">X</div>\n        <h1>Digioh-${e.getTrackingAppName()} Control Panel</h1>\n        <div>\n          <div class="dataRow">\n            <span style="font-weight: bold;">Email:</span>\n            <span id="digiohEmail">[Email]</span>&nbsp;\n            <svg id="copyEmail" viewbox="0 0 32 32" class="copyIcon">\n              <use href="#tpau-clipboard"></use>\n            </svg>\n          </div>\n          <div class="dataRow">\n            <span style="font-weight: bold;">${e.getUniqueIdName()}:</span>\n            <span id="digiohUserId">[UserID]</span>&nbsp;\n            <svg id="copyUserId" viewbox="0 0 32 32" class="copyIcon">\n              <use href="#tpau-clipboard"></use>\n            </svg>\n          </div>\n        </div>\n        <div class="dataRow">\n          <button id="digiohTestConnection">Test Connection</button>\n          <button id="digiohForgetUser">Forget User</button>\n          <button id="digiohShowUserData">User Data</button>\n        </div>\n        <div>\n          <input id="digiohEmailOrUserid" placeholder="Identify by email or userId">\n          <button id="digiohIdentifyUser" aria-label="Submit Modal Form">Identify User</button>\n        </div>\n        \x3c!-- Notification console container --\x3e\n        <div id="digiohConsole"></div>\n      </div>\n    `;o.innerHTML+=s,n.body.appendChild(a),e._notifyConsole=o.querySelector("#digiohConsole");let l=e=>o.querySelector(e),c=function(e,t){const r=n.createElement("input");n.body.appendChild(r),r.value=t,r.select(),n.execCommand("copy"),n.body.removeChild(r);let a=e.is("svg, svg *")?"fill":"color";const o=e.css(a);e.css(a,"green"),setTimeout((function(){e.css(a,o)}),2e3)};l("#copyEmail").addEventListener("click",(function(){const t=e.getEmail();t&&c(r(this),t)})),l("#copyUserId").addEventListener("click",(function(){const t=e.getUserId();t&&c(r(this),t)})),l("#digiohTestConnection").addEventListener("click",(function(){e.tpauTestConnection()})),l("#digiohForgetUser").addEventListener("click",(function(){e.clearData(e.CLEAR_ALL),e.setPlatformSdkIdentity(void 0,void 0),t.location.reload()})),l("#digiohIdentifyUser").addEventListener("click",(function(){let t=r(l("#digiohEmailOrUserid")).val().trim();/[<>]/.test(t)&&(t=""),t?/@/.test(t)?/\s*[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\s*/.test(t)?e.identifyUserByEmail(t,null):e.tpauNotifyError("Enter a valid email address"):t.length>40?e.tpauNotifyError("Enter a valid "+e.getUniqueIdName()+" (max 40 chars)"):e.identifyUserByUserId(t,null):e.tpauNotifyError("Enter an email address or "+e.getUniqueIdName())})),l("#digiohShowUserData").addEventListener("click",(function(){e.getProfile()?e.tpauNotify(e.formatUserDataHtml(e.getTargetableObject())):e.tpauNotifyWarn("User is unknown");const t="function"==typeof e.getEventQueue?e.getEventQueue():null;let n="<strong>Event Queue</strong><ul>";if(t.length){for(let e=t.length-1;e>=0;e--){const r=t[e];n+="<li><strong>"+r.eventName+"</strong>: "+JSON.stringify(r.payloadObj)+"</li>"}n+="</ul>",e.tpauNotify(n)}else e.tpauNotify("No queued events")})),o.querySelectorAll(".digiohCloseButton").forEach((function(e){e.addEventListener("click",(function(){a.style.display="none"}))})),setInterval((function(){let t=e.getEmail(),n=e.getUserId();t&&t.trim()||(t="(unknown)"),n&&n.trim()||(n="(unknown)"),l("#digiohEmail").innerHTML=t,l("#digiohUserId").innerHTML=n}),500)},e.tpauTestConnection=function(){const t="test@test.com",n=e.getLookupProxyEndpoint(t);if(!e.isProxyEnabled())return void e.tpauNotifyError("Must configure account metadata tpau_proxy_integration_id to use this app");const a={url:n,dataType:"jsonp"};r.ajax(a).done((function(n){"string"==typeof n&&(n.startsWith("(")&&n.endsWith(");")&&(n=n.substring(1,n.length-2)),n=JSON.parse(n)),n.hasOwnProperty("success")?n.success||n.error=="profile "+t+" not found"?e.tpauNotify("TPAU "+e.getTrackingAppName()+" Connection OK"):e.tpauNotify("TPAU "+e.getTrackingAppName()+" Connection Error: "+n.error):e.tpauNotifyError('TPAU expects standard proxy response {success:true|false, error:"", payload:{...}}; got '+JSON.stringify(n))}))},e.doSessionStart=function(n){return"1"!=t.sessionStorage.getItem(d)&&(t.sessionStorage.setItem(d,"1"),e.tpauGa4Track(n),!0)},e.isDebug=function(){return/DEBUG/.test(e.getQueryString())},e.debug=function(){e.isPreview(),e.debugger()},e.tpauProcessFormSubmit=function(t,n={}){if(!e.isPreview()&&!e.tpauFatalError){if(e.getEmail()&&!t.email&&(t.email=e.getEmail()),e.getUserId()){const n=e.tpauGetUserIdFieldName();t[n]=e.getUserId(),e.tpauNotify(`Set submission userId ${n} = ${e.getUserId()}`)}return n.email&&(e.processSetPlatformSdkIdentity(void 0,t.email),e.tpauFormIdentified(),setTimeout((function(){e.identifyUserByEmail(t.email,"digioh_tpau_identified_by_box")}),3e3)),t}},e.getUrlParameterSafe=function(t){return(e.getUrlParameter(t)||"").replace(/[&<>"'`=\/]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"}[e]}))},e.tpauProcessIdentity=function(){let n,r,a;e.resetTargetableObject(!0);const o=e.getAccountMetadata(g),i="false"!==e.getAccountMetadata(u);if(e.getUrlParameter("userId")?(r=e.getUrlParameterSafe("userId"),i&&e.hideUrlParameter("userId"),a="digioh_tpau_identified_by_url"):e.getUrlParameter("user_id")?(r=e.getUrlParameterSafe("user_id"),i&&e.hideUrlParameter("user_id"),a="digioh_tpau_identified_by_url"):e.getUrlParameter("email")?(n=e.getUrlParameterSafe("email"),i&&e.hideUrlParameter("email"),a="digioh_tpau_identified_by_url"):o?(r=function(n=""){const r=(n=function(e){return/^(window\.parent\.|window\.)/.test(e)?e.startsWith("window.parent.")?e:e.replace(/^window\./,"window.parent."):"window.parent."+e}(n)).match(/[a-zA-Z0-9_$]+(?:\(\))?/g)||[];let a=t.parent;for(let t=0;t<r.length;t++){if(null==a)return void e.tpauNotifyError(`Invalid var ${n}: null dereference`);let o=r[t];if(o.endsWith("()")){const t=o.substring(0,o.length-2);if("function"!=typeof a[t])return void e.tpauNotifyError(`Invalid var ${n}: ${t} is not a function`);try{a=a[t]()}catch(n){return void e.tpauNotifyError(`Error calling method ${t}: ${n.message}`)}}else a=a[o]}return a}(o),r?e.isEqualIdentity(r,e.getUserId())||(e.tpauNotify(`Found userId ${r} in JS var ${o}`),a="digioh_tpau_identified_by_jsvar"):e.tpauNotifyWarn(`userId not found in JS var ${o}`)):(r=e.getPlatformSdkUserIdIdentity(),n=e.getPlatformSdkEmailIdentity(),(r||n)&&(e.isEqualIdentity(r,e.getUserId())||e.isEqualIdentity(n,e.getEmail())||(a="digioh_tpau_identified_by_sdk"))),!e.tpauFatalError)if(a)r?e.identifyUserByUserId(r,a):e.identifyUserByEmail(n,a),e.doSessionStart("digioh_tpau_known_session_start");else if(e.isKnown()){let t=e.getProfile(),n=e.tpauIsUseCache();if(t&&n)e.tpauNotify("Using cached profile"),e.generateTargetableAttributes(),e.processQueuedEvents(),e.doSessionStart("digioh_tpau_known_session_start"),e.processSetPlatformSdkIdentity(e.getUserId(),e.getEmail());else if(t&&!n){e.generateTargetableAttributes(),e.processQueuedEvents(),e.tpauNotify("Refreshing cached profile due to recent form submit identification");const t=null,n=e.getUserId()||e.getEmail();e.getUserAsync(e.getLookupProxyEndpoint(n),t)}else{const t=null;e.getUserId()?e.identifyUserByUserId(e.getUserId(),t):e.identifyUserByEmail(e.getEmail(),t),e.doSessionStart("digioh_tpau_known_session_start")}}else e.tpauNotify("No saved "+e.getTrackingAppName()+" profile, email, or "+e.getUniqueIdName()+" available"),e.doSessionStart("digioh_tpau_anonymous_session_start"),e.resetTargetableObject(!1)},e.tpauGetMetadata=function(){let e=localStorage.getItem("_tpaumd")||"{}";return JSON.parse(e)},e.tpauSetMetadata=function(e){localStorage.setItem("_tpaumd",JSON.stringify(e))},e.tpauFormIdentified=function(){let t=e.tpauGetMetadata();t.formIdentifiedTime=(new Date).getTime(),e.tpauSetMetadata(t)},e.tpauIsUseCache=function(){let t=e.tpauGetMetadata();return(new Date).getTime()-(t.formIdentifiedTime||0)>3e5},e.tpauGetUserIdFieldName=function(){let t=e.getAccountMetadata(c)||"custom_50";return/^\s*\d{1,3}\s*$/.test(t)&&(t="custom_"+t.replace(/\s/g,"")),t=t.toLowerCase(),t},e.initTpau=function(){try{if(e.initDialog(),e.validateConfig(),e.tpauFatalError)return;if(!e.isProxyEnabled())return e.tpauNotifyWarn("TPAU app installed but not enabled via account metadata "+i),void(e.tpauFatalError=!0);if(function(){let t=e.getPlatformAppHelpUrl();if(/</.test(t)){const n="App version compatibility issue, api.getPlatformAppHelpUrl returned HTML not URL";e.tpauNotifyError(n),e.tpauTrackAndNotifyError(n+": "+t,e.RECOVERABLE_ERROR)}e.tpauNotify('<a href="'+t+'" target="_blank" style="color:blue">Help Document</a>')}(),e.tpauProcessIdentity(),e.tpauFatalError)return;if(e.processPageview(),e.tpauFatalError)return;e.isSPA&&e.isKnown()}catch(t){e.tpauTrackAndNotifyError("Exception in initTpau: "+t.toString(),e.FATAL_ERROR)}}}catch(_){return DIGIOH_CUSTOM_JS.logError(_,"custom_js_parent_apps"),_.message="DIGIOH: Custom JS Apps #464 (Parent: AfterDocReady) -- "+_.message,t.console.error(_),!0}},CJSAPPS_PARENT[709]={},CJSAPPS_PARENT[709].AfterDocReady=function(e,t,n,r,a){DIGIOH_CUSTOM_JS.log;try{function o(e,t){t||(t="=");const n=e.indexOf(t);if(-1===n)return[e];return[e.substring(0,n),e.substring(n+1)]}e.umtStorage={key:"digioh_umt_storage",set:function(n,r,a){try{let e=JSON.parse(t.parent.localStorage.getItem(this.key)||"{}"),o=new Date;o.setDate(o.getDate()+a),e[n]={value:r,expires:o.getTime()},t.parent.localStorage.setItem(this.key,JSON.stringify(e))}catch(t){e.warnNotifyApp("UTM Storage: Failed to store "+n)}},get:function(n){try{let e=JSON.parse(t.parent.localStorage.getItem(this.key)||"{}"),r=e[n];return r?(new Date).getTime()>r.expires?(delete e[n],t.parent.localStorage.setItem(this.key,JSON.stringify(e)),null):r.value:null}catch(t){return e.warnNotifyApp("UTM Storage: Failed to retrieve "+n),null}}},e.storeQueryString=function(){let t=e.getQueryString();if(t)for(var n of(t=t.substring(1),t=t.split("&"),t))2==(n=o(n)).length&&(r=n[0],a=n[1],e.umtStorage.get(r+"_first")||e.umtStorage.set(r+"_first",a,1e3),e.umtStorage.set(r+"_last",a,1e3),e.umtStorage.set(r+"_session",a,1/24/2));var r,a},e.getStoredQueryStringVal=function(t,n){if("first"!=n&&"last"!=n&&"session"!=n)throw new Error("api.getStoredQueryStringVal expects first, last, session param");t=t+"_"+n;let r=e.umtStorage.get(t);return decodeURIComponent(r||"")},e.getGAValue=function(){var e=n.cookie.match("(?:^|;)\\s*_ga=([^;]*)"),t=e?decodeURIComponent(e[1]):null;return t&&(e=t.match(/(\d+\.\d+)$/)),e?e[1]:""},e.getGAClientId=function(){return e.GoogleAnalytics&&e.GoogleAnalytics.tracker&&e.GoogleAnalytics.tracker.get?e.GoogleAnalytics.tracker.get("clientId"):e.getGAValue()},e.storeQueryString(),e.replaceMergeTagsInString=function(n,r){const o=function(e){return"null"==e||"undefined"==e?"":e||""},i="undefined"!=typeof boxapi,s=function(){return o(r&&r.pageName?r.pageName:boxapi.getPageName())};if("string"!=typeof n)throw new Error("UMT expects string, got "+typeof n+" with value "+n.toString());if(!n)return"";if(n.indexOf("[")<0)return n;const l=e.isPreview()?"[N/A in Preview]":"",c="";let g=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\[COUNTRY\]/gi,o(e.getClientCountryName())||l)).replace(/\[COUNTRY_CODE\]/gi,o(e.getClientCountryCode())||l)).replace(/\[REGION\]/gi,o(e.getClientRegionOrStateName())||l)).replace(/\[REGION_CODE\]/gi,o(e.getClientRegionOrStateCode())||l)).replace(/\[CITY\]/gi,o(e.getClientCity())||l)).replace(/\[POSTAL_CODE\]/gi,o(e.getClientPostalCode())||l)).replace(/\[REFERRING_URL\]/gi,o(e.getReferrer())||l)).replace(/\[LANDING_URL\]/gi,o(e.getLandingPageUrl())||l)).replace(/\[BROWSER_TYPE\]/gi,o(e.getBrowserType())||l)).replace(/\[WEB_SOURCE\]/gi,o(e.getTrafficSource())||l)).replace(/\[SEARCH_ENGINE\]/gi,o(e.getSearchEngineSource())||l)).replace(/\[PAGE_VISITS\]/gi,o(e.getTotalPageViews())||l)).replace(/\[PAST_VISITS\]/gi,o(e.getTotalSessions())||l)).replace(/\[HOST_NAME\]/gi,o(e.getHostname())||l)).replace(/\[PAGE_PATH\]/gi,o(e.getPagePath())||l)).match(/\[PAGE_PATH\|(\d)\]/);if(g){let t=parseInt(g[1]),r=e.getPagePath().split("/");!isNaN(t)&&t<r.length&&(n=n.replace(g[0],r[t]))}n=(n=n.replace(/\[QUERY_STRING\]/gi,o(e.getQueryString())||l)).replace(/\[IP_ADDRESS\]/gi,o(e.getClientIpAddress())||l),i&&(n=n.replace(/\[(LIGHT)?BOX_NAME\]/gi,o(boxapi.getName())||l)),i&&(n=n.replace(/\[(LIGHT)?BOX_ID\]/gi,o(boxapi.getId())||l)),i&&(n=n.replace(/\[BOX_TYPE\]/gi,o(boxapi.getBoxType())||l)),i&&(n=n.replace(/\[BOX_PAGE(_?NAME)?\]/gi,o(boxapi.getPageTitle(s()))||l)),n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\[VARIATION_ID\]/gi,o(a.variation_short_id)||l)).replace(/\[VENDOR_ID\]/gi,o(e.getAccountId())||l)).replace(/\[VENDOR_GUID\]/gi,o(e.getAccountGuid())||l)).replace(/\[DEVICE\]/gi,o(e.getDeviceType())||l)).replace(/\[OPERATING_SYSTEM\]/gi,o(e.getOperatingSystem())||l)).replace(/\[BROWSER_TYPE\]/gi,o(e.getBrowserType())||l)).replace(/\[BROWSER_VERSION\]/gi,o(e.getBrowserVersion())||l)).replace(/\[SUBMIT_URL\]/gi,o(e.getCurrentUrl())||l)).replace(/\[SUBMIT_DATE\]/gi,o((new Date).toUTCString())||l)).replace(/\[EMAIL\]/gi,o(e.getDataLayerValue("email")||(e.getEmail?e.getEmail():c))||c)).replace(/\[USER_?ID\]/gi,o(e.getUserId?e.getUserId():"")||c)).replace(/\[PHONE\]/gi,o(e.getDataLayerValue("phone"))||c)).replace(/\[NAME(?:\|([^\]]*))?\]/gi,((t,n)=>o(e.getDataLayerValue("name"))||n||c))).replace(/\[FIRST_NAME(?:\|([^\]]*))?\]/gi,((t,n)=>o(e.getDataLayerValue("first_name"))||n||c))).replace(/\[LAST_NAME(?:\|([^\]]*))?\]/gi,((t,n)=>o(e.getDataLayerValue("last_name"))||n||c))).replace(/\[OPT_IN\]/gi,o(e.getDataLayerValue("opt_in"))||c)).replace(/\[URIENC\|FIRST_NAME\]/gi,o(encodeURIComponent(e.getDataLayerValue("first_name")))||c)).replace(/\[URIENC\|LAST_NAME\]/gi,o(encodeURIComponent(e.getDataLayerValue("last_name")))||c)).replace(/\[URIENC\|EMAIL\]/gi,o(encodeURIComponent(e.getDataLayerValue("email")))||c);const u=t.parent.mParticle&&t.parent.mParticle.Identity&&t.parent.mParticle.Identity.getCurrentUser()?t.parent.mParticle.Identity.getCurrentUser().getMPID():null;if(n=n.replace(/\[MPID\]/gi,u||l),/\[DL\|/.test(n)){const e=n.match(/\[DL\|(\w+)\|(\w+)\]/);if(e&&3==e.length){const r=e[0],a=e[1],o=e[2];let i="";if(t.parent.dataLayer&&a&&o)for(const e of t.parent.dataLayer)if(e.event==a){i=e[o]||"";break}n=n.replace(r,i)}}const d=/\[RX\|/i,p=/\[RX\|([A-Z][A-Z0-9_]+)\|\/((?:\\\/|[^\/])*)\/([gmixsuUAJD]*)\]/i,f=/^(?:[^\\(]|\\.)*\((?:[^\\)]|\\.)*\)(?:[^\\(]|\\.)*$/;for(;d.test(n);)try{const t=n.match(p);if(!t)throw new Error("expected format [RX|SIMPLE_MERGE_TAG_NAME|/rx body/rxflags]");const r=t[0],a="["+t[1]+"]",o=e.replaceMergeTagsInString(a);if(o==a)throw new Error("Invalid simple merge tag "+t[1]+" in "+r);const i=t[2],s=t[3]||"",l=new RegExp(i,s);if(!f.test(i))throw new Error("regexp must contain exactly (one capturing group)");if(/g/.test(s))throw new Error("global match flag 'g' is not supported");const c=o.match(l);let g="";c&&c[1]?g=c[1]:e.warnNotifyApp("[RX] merge tag /"+i+"/"+s+"did not match '"+o+" ("+a+")"),n=n.replace(r,g)}catch(t){e.errorNotifyApp("Invalid RX merge tag in: '"+n+"': "+t.message),n=""}if("function"==typeof e.getGAClientId&&(n=n.replace(/\[GA_CLIENT_ID\]/gi,o(e.getGAClientId())||c)),"function"==typeof n.matchAll){const r=n.matchAll(/\[TEXT_?(\d{1,3})\]/gi);if(i)for(const e of r){const t=e[1],r="main"==s()?"text"+t:s()+"text"+t,a=settings[r]||{};n=n.replace(e[0],o(a.text)||c)}const a=n.matchAll(/\[BUTTON_?(\d{1,3})\]/gi);if(i)for(const e of a){const t=e[1],r="main"==s()?"button"+t:s()+"button"+t,a=settings[r]||{};n=n.replace(e[0],o(a.text)||c)}if([...n.matchAll(/\[URIENC\|CUSTOM_?(\d{1,3})\]/gi)].length){let t=(n=n.replace(/\URIENC\|/gi,"")).matchAll(/\[CUSTOM_?(\d{1,3})\]/gi);for(let r of t)n=n.replace(r[0],o(encodeURIComponent(e.getDataLayerValue("custom_"+r[1])))||c)}let l=n.matchAll(/\[CUSTOM_?(\d{1,3})\]/gi);for(let t of l)n=n.replace(t[0],o(e.getDataLayerValue("custom_"+t[1]))||c);if([...n.matchAll(/\[URIENC\|EP?(\d{1,3})_CUSTOM_?(\d{1,3})\]/gi)].length){let t=(n=n.replace(/\URIENC\|/gi,"")).matchAll(/\[EP?(\d{1,3})\_CUSTOM_?(\d{1,3})\]/gi);for(let r of t)n=n.replace(r[0],o(encodeURIComponent(e.getDataLayerValue("ep"+r[1]+"_custom_"+r[2])))||c)}let g=n.matchAll(/\[EP?(\d{1,3})\_CUSTOM_?(\d{1,3})\]/gi);for(let t of g)n=n.replace(t[0],o(e.getDataLayerValue("ep"+t[1]+"_custom_"+t[2]))||c);let u=(n=n.replace(/\[COOKIE\|([^\|\]]+)(?:\|([^\]]*))?\]/g,((t,n,r)=>{const a=e.getCookie(n);return o(a)||r||""}))).matchAll(/\[LS\|([^\|\]]+)(\|(\S+))?\]/g);for(let e of u){let r=e[3]||"";n=t.parent.localStorage?n.replace(e[0],o(t.parent.localStorage.getItem(e[1]))||r):r}let d=n.matchAll(/\[QS\|([^\|\]]+)(\|(\S+))?\]/g);for(let t of d){let r=t[3]||"";n=n.replace(t[0],o(e.getStoredQueryStringVal(t[1],"last"))||r)}d=n.matchAll(/\[QS(FC|LC|SN)\|([^\|\]]+)(\|(\S+))?\]/g);for(let t of d){let r=t[4]||"",a="";switch(t[1]){case"FC":a="first";break;case"LC":default:a="last";break;case"SN":a="session"}n=n.replace(t[0],o(e.getStoredQueryStringVal(t[2],a))||r)}if(i){const t=n.matchAll(/\[i18n\|([a-zA-z0-9_]+)\]/gi);for(const r of t){const t=r[1];if(!0===boxapi.i18nReady){const a=boxapi.geti18nMatrix(boxapi.getId());if(!a||!a.length){e.warnNotifyApp("Found i18n merge tags but i18n app not yet initialized");break}const o=boxapi.geti18nMatrix(boxapi.getId()),i=boxapi.getElemIndex(o,t),s=boxapi.getLangIndex(o,e.language||"en");translation=o[i][s],n=n.replace(r[0],translation)}}}if(e.getStoredSegTraits){let t=n.matchAll(/\[SEG_TRAIT\|([^\|\]]+)(\|(\S+))?\]/g);for(let r of t){let t=r[4]||"",a=r[1],i=o(e.getStoredSegTraits()[a])||t;n=n.replace(r[0],i)}}if("function"==typeof e.getMergeTagName){const r=e.getMergeTagName(),a=new RegExp("\\["+r+"\\|([a-zA-Z_\\- ]+)(?:\\|(.+?))?\\]","g"),o=n.matchAll(a);for(const r of o){const a=r[0],o=r[1],i=r[2],s=e.getTargetableObjectName();if(t.parent[s]||e[s]){const r=t.parent[s][o];r?(n=n.replace(a,r),e.infoNotifyApp("Universal Merge Tags: replaced from "+e.getTrackingAppName()+" "+o+"="+r)):i?(n=n.replace(a,i),e.infoNotifyApp("Universal Merge Tags: replaced from "+e.getTrackingAppName()+" "+o+"="+i+" (default)")):(e.warnNotifyApp("Universal Merge Tags: no value for "+e.getTrackingAppName()+" field "+o+" with no default"),n="")}else e.warnNotifyApp("Universal Merge Tags: used "+n+" but TPAU App is not initialized "+s+" object not found)")}}else{const t=n.matchAll(/\[ITERABLE_FIELD\|([a-zA-Z_\- ]+)(?:\|(.+?))?\]/g);for(const r of t){const t=r[0],a=r[1],o=r[2];if(e.itrbl){const r=e.itrbl[a];r?(n=n.replace(t,r),e.infoNotifyApp("Universal Merge Tags: replaced from Iterable "+a+"="+r)):o?(n=n.replace(t,o),e.infoNotifyApp("Universal Merge Tags: replaced from Iterable "+a+"="+o+" (default)")):(e.warnNotifyApp("Universal Merge Tags: no value for Iterable field "+a+" with no default"),n="")}else e.warnNotifyApp("Universal Merge Tags: used "+n+" but Iterable App is not active ([https://help.digioh.com/knowledgebase/targeting-box-display-to-iterable-user-attributes-or-lists/|help doc])")}}}if(/\[UTC\]/gi.test(n)){const e=new Date;n=n.replace(/\[UTC\]/gi,e.getTime().toString())}if(/\[UTCDAY\]/.test(n)){const e=(new Date).setUTCHours(0,0,0,0);n=n.replace(/\[UTCDAY\]/gi,e)}if(i){const t=boxapi.getWidgetMetadata()||[];for(const r of t)if(RX_CUSTOM_MERGE_TAG_MD.test(r.k)){const t=r.k.match(RX_CUSTOM_MERGE_TAG_MD)[1],a=r.v,o=e.getDataLayerValue(a,boxapi.getId())||e.getDataLayerValue(a);n=n.replace("["+t+"]",o)}}return Object.entries(e.appMergeTags).forEach((([e,r])=>{if(n.includes(e)){let a=function(e=""){try{const n=e.split(/[\.\[\]\'\"]/).filter((e=>""!==e));let r=t.parent;for(const e of n){if(null==r)return;r=r[e]}return r}catch(e){return}}(r.jsVarExpr);null==a&&(a=r.defaultValue),n="function"==typeof n.replaceAll?n.replaceAll(e,a):n.replace(e,a)}})),n},e.appMergeTags=e.appMergeTags||{},e.umtRegisterAppMergeTag=function(t,n,r=""){if(!t||!/^[a-z0-9_|]+$/i.test(t))throw new Error(`Invalid Merge Tag Key: ${t}`);if(!n||!/^(?:[a-z_$][a-z0-9_$]*)(?:\.(?:[a-z_$][a-z0-9_$]*)|\[(?:[a-z_$][a-z0-9_$]*|\d+)\])*$/i.test(n))throw new Error(`Invalid Merge Tag JS Var: ${n}`);t=`[${t}]`,e.appMergeTags[t]={jsVarExpr:n,defaultValue:r}}}catch(i){return DIGIOH_CUSTOM_JS.logError(i,"custom_js_parent_apps"),i.message="DIGIOH: Custom JS Apps #709 (Parent: AfterDocReady) -- "+i.message,t.console.error(i),!0}},CJSAPPS_PARENT[523]={},CJSAPPS_PARENT[523].AfterDocReady=function(e,t,n,r,a){DIGIOH_CUSTOM_JS.log;try{t.addEventListener("message",(function(e){"string"==typeof e.data&&e.data.startsWith("sms:")&&(t.location.href=e.data)}))}catch(e){return DIGIOH_CUSTOM_JS.logError(e,"custom_js_parent_apps"),e.message="DIGIOH: Custom JS Apps #523 (Parent: AfterDocReady) -- "+e.message,t.console.error(e),!0}},CJSAPPS_PARENT[339]={},CJSAPPS_PARENT[758]={},CJSAPPS_PARENT[758].AfterDocReady=function(e,t,n,r,a){DIGIOH_CUSTOM_JS.log;try{const n="EU"===e.CONFIG.REGION?"eu-jsapi.lightboxcdn.com":"jsapi.lightboxcdn.com",r="https://"+n+"/it9nrcf8em5qe7t85c9/v1/iterable/",a="https://"+n+"/it9nrcf8em5qe7t85c9/v1/iterable/EventTrack?";e.getTrackingAppName=function(){return"Iterable"},e.getLookupProxyEndpoint=function(t){return/\s*[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\s*/.test(t)?r+"GetUserByEmail?user_guid="+e.getAccountGuid()+"&integration_id="+e.getProxyIntegrationId()+"&platform=d&format=jsonp&email="+t:""!==t?r+"GetUserById?user_guid="+e.getAccountGuid()+"&integration_id="+e.getProxyIntegrationId()+"&platform=d&format=jsonp&userid="+t:void 0},e.getTrackEventProxyEndpoint=function(t){let n="";if(t){let r=JSON.stringify(t),a=e.LIGHTBOX.LZString.compressToBase64(r);n="&event_json_lz_encoded="+encodeURIComponent(a)}return a+"user_guid="+e.getAccountGuid()+"&integration_id="+e.getProxyIntegrationId()+"&platform=d&format=jsonp"+n},e.getPlatformAppHelpUrl=function(){return"https://help.digioh.com/knowledgebase/targeting-box-display-to-iterable-user-attributes-or-lists/"},e.getMergeTagName=function(){return"ITERABLE_FIELD"},e.getPlatformSdkEmailIdentity=function(){},e.getPlatformSdkUserIdIdentity=function(){},e.setPlatformSdkIdentity=function(t,n){return e.PLATFORM_SDK_IDENTIFY_NOOP},e.standardizeGetUserApiResponse=function(t){if(t.error)return t.message||t.error;const n=t.user;let r={};if(n){const e=n.dataFields.userListIds||[],t=n.dataFields.emailListIds||[];r={lists:[...new Set([...e,...t])],segments:[],profile:{}},n.userId&&(r.userId=n.userId,r.id=n.userId),n.email&&(r.email=n.email);const a=["email","itblInternal"];for(const e of Object.keys(n.dataFields))a.includes(e)||(r.profile[e]=n.dataFields[e])}return t&&t.msg&&t.msg.includes("No user exists")?"Did <strong>not</strong> find "+e.getTrackingAppName()+" User"+("function"==typeof e.getEmail?": "+e.getEmail():""):r},e.createPlatformEventProxyPayload=function(t,n,r=null){if(!e.isKnown())return e.tpauTrackAndNotifyError("Can't createPlatformEventProxyPayload for unknown user",e.FATAL_ERROR),{};const a={};if(e.getUserId()&&(a.userId=e.getUserId()),e.getEmail()&&(a.email=e.getEmail()),a.eventName=t,n&&n.dataFields){Object.assign(a,{dataFields:n.dataFields});for(const e in n)"dataFields"!==e&&(a[e]=n[e])}else n&&(a.dataFields=n);return r&&(r.updateEventId&&(a.updateEventId=r.updateEventId),r.createdAt&&(a.createdAt=r.createdAt)),a},e._generateTargetableAttributes=e.generateTargetableAttributes,e.generateTargetableAttributes=function(){e._generateTargetableAttributes(),t.itrbl=t.itrbl||t.tpau,e.itrbl=t.tpau},e.initTpau()}catch(e){return DIGIOH_CUSTOM_JS.logError(e,"custom_js_parent_apps"),e.message="DIGIOH: Custom JS Apps #758 (Parent: AfterDocReady) -- "+e.message,t.console.error(e),!0}},CJSAPPS_PARENT[733]={},DIGIOH_CUSTOM_JS={runCustomJsOnDocumentReady:function(e,t,n,r,a){try{var o={};o.log=DIGIOH_CUSTOM_JS.log;var s=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage;DIGIOH_API.lang=s.split("-")[0],DIGIOH_API.locale=s.split("-")[1],DIGIOH_API.urlLocale=location.pathname.match(/^\/([a-z][a-z])\//),DIGIOH_API.urlLocale&&DIGIOH_API.urlLocale.length>1?DIGIOH_API.urlLocale=DIGIOH_API.urlLocale[1]:DIGIOH_API.urlLocale="";var l="custom",c="59114",g="spa_1ngIe5nI8Gmf0Q8RzqW3IorrZjt",u="js",d="email",p="phone";var f="custom_19",m="custom_20";if(o.log("Segment GJS App V1.0"),e.segmentPersonaIntegrationId=c,e.segmentSpaceId=g,e.segmentFieldMap={custom_1:"[]",custom_2:"[]",custom_3:"[]",custom_4:"[]",custom_5:"[]",custom_6:"[]",custom_7:"[]",custom_8:"[]",custom_9:"[]",custom_10:"[0]",custom_18:"properties",custom_19:"anonymousId",custom_20:"userId"},function(){switch(l){case"email":case"base64email":break;case"custom":if("check"=={anonymousId:(t={email:"check"})[f],userId:t[m]})throw new Error("You must implemement function getSegmentCustomId(x)");break;default:throw new Error("Invalid SEGMENT_ID_FORMAT "+l)}var t;switch(u){case"js":case"api":break;default:throw new Error("Invalid SEGMENT_INTEGRATION_METHOD js")}for(i=1;i<=10;i++)-1!=e.segmentFieldMap["custom_"+i].indexOf("[SEG_PROP_CUSTOM_")&&(e.segmentFieldMap["custom_"+i]="digiohFieldCustom"+i)}(),e.segProps=e.segProps||{},e.selectedTraits=(...e)=>t=>e.reduce(((e,n)=>({...e,[n]:t[n]})),{}),e.getSegmentTraits=e.getSegmentTraits||function(n){if(e.traits)return!0;if(t.sessionStorage){var a=t.sessionStorage.getItem("_digiohsegtraits");if(a)try{return e.traits=JSON.parse(atob(a)),!0}catch(n){o.log("Bad trait JSON: "+n),t.sessionStorage.removeItem("_digiohsegtraits"),e.traits={}}}var i="https://jsapi.lightboxcdn.com/seghf9svjz85ruu7m29/v1/segment/GetUserByExternalId?platform=d&format=jsonp";return i+="&user_guid="+e.getAccountGuid(),i+="&integration_id="+e.segmentPersonaIntegrationId,i+="&space_id="+e.segmentSpaceId,i+="&external_id=user_id:"+n,i+="&admin_debug=yes",o.log("Segment API call: "+i),r.ajax({url:i,timeout:1e3,dataType:"text",success:function(n,r,a){try{o.log("API data: "+n),t.raw=n,n=JSON.parse(n),n=JSON.parse(n.body),n=e.selectedTraits("is_member","web_country","web_locale","username","email","profile_subscription_status","lifetime_order_count")(n.traits),o.log("Segment API traits obj: "+JSON.stringify(n)),t.sessionStorage&&t.sessionStorage.setItem("_digiohsegtraits",btoa(JSON.stringify(n))),e.traits=n}catch(e){o.log("Segment API exception processing response: "+e)}finally{e.traits=e.traits||{},t.DIGIOH_API.LIGHTBOX.customJsOnDocumentReadyCallback()}},error:function(n,r,a){o.log("Segment API error: "+r+" : "+a),e.traits={},t.DIGIOH_API.LIGHTBOX.customJsOnDocumentReadyCallback()}}),!1},e.segIdentify=function(n,r,a){if(t.parent.analytics&&t.parent.analytics.identify){var i=e.segProps;for(var s in r)i[s]=r[s];t.parent.analytics.identify(n,i,a),o.log("segIdentify: "+n+" : "+JSON.stringify(e.segProps))}else o.error("Segment is not available yet!")},e.segTrack=function(n,r){if(t.parent.analytics&&t.parent.analytics.track){n=n||"Digioh Submit";var a=e.segProps;for(var i in r)a[i]=r[i];t.parent.analytics.track(n,a),o.log("segTrack: "+n+" : "+JSON.stringify(e.segProps))}},e.segAddProperty=function(t,n){t&&n?(e.segProps[t]=n,o.log("segAddProperty: "+t+"="+n)):o.log("ERROR: segAddProperty missing parameter")},o.log("segProcessSubmit: initializing"),e.segProcessSubmit=function(r,a,i){if(!r||!a||!i)return o.log("ERROR: processSegmentSubmit missing critical parameter, no data sent to Segment"),i;o.log("segProcessSubmit: "+r.getName()+" :: "+JSON.stringify(i)),i.email?(i.email=i.email.toLowerCase(),d&&e.segAddProperty(d,i.email),t.localStorage&&t.localStorage.setItem("_em",btoa(i.email))):t.localStorage&&(i.email=atob(t.localStorage.getItem("_em"))),i.phone&&p&&e.segAddProperty(p,i.phone),i.first_name&&e.segAddProperty("firstname",i.first_name),i.last_name&&e.segAddProperty("lastname",i.last_name),i.full_name&&e.segAddProperty("fullname",i.full_name),"true"!==i.opt_in&&"false"!==i.opt_in||e.segAddProperty("optin",i.opt_in);var s=null;if(r.isMainPage()&&(s="custom"),r.isExtraPage(1)&&(s="ep1_custom"),r.isExtraPage(2)&&(s="ep2_custom"),r.isExtraPage(3)&&(s="ep3_custom"),r.isExtraPage(4)&&(s="ep4_custom"),s)for(field=1;field<=20;field++){var c=s+field,g=i["custom_"+field];if(g&&a[c]){o.log("segProcessSubmit: "+c+".label="+a[c].label+" :: x.custom_"+field+"="+g);var u=a[c].label;u&&0!==u.indexOf("Custom ")?(u=u.toLowerCase(),o.log("segProcessSubmit: using label "+u+" for custom_"+field)):(u=e.segmentFieldMap["custom_"+field],o.log("segProcessSubmit: using fallback "+u+" for custom_"+field)),u?e.segAddProperty(u.toLowerCase(),g):o.log("ERROR: segProcessSubmit could not find label for "+c)}}if(t.parent.analytics?(i[f]=t.parent.analytics.user().anonymousId(),t.parent.analytics.user().id()&&(i[m]=t.parent.analytics.user().id())):(o.log("WARNING: Segment JS not found, no data sent from JS"),i[f]=e.getClientId()),i.email)switch(l){case"email":i[m]=i.email;break;case"base64email":i[m]=btoa(i.email);break;case"custom":break;default:o.error("Invalid Segment ID format specified!")}return i[m]||i[f]?(e.segIdentify(i[m],{},{context:{locale:n.documentElement.lang}}),e.segTrack("Sign Up Complete",{source:"digioh"})):e.segTrack("Digioh Partial"),i},e.segmentPersonaIntegrationId&&e.segmentSpaceId)try{_=function(){if(e.segmentUserId=t.parent.analytics.user().id()||"",e.segmentUserId&&!e.traits){if(!e.getSegmentTraits(e.segmentUserId))return o.log("Waiting for Segment API"),"async_callback";o.log("Segment traits from cache")}else o.log("No Segment userId")},I=setInterval((function(){void 0!==t.parent.analytics&&!0===t.parent.analytics.initialized&&(clearInterval(I),_())}),100)}catch(e){o.log(e.message)}if(setInterval((function(){(r("input[placeholder*='enter email']")||r("input[placeholder*='e.g. you@email.com']")||r("input[type=email]")||r("#ReduxFormInput10").length)&&r("input[placeholder*='enter email'],input[placeholder*='e.g. you@email.com'], input[type=email] , #ReduxFormInput10").each((function(e){let t=r(this).val();(function(e){return e=decodeURIComponent(e),/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)})(t)&&localStorage.setItem("digioh_email",t)}))}),1e3),t.location.href.indexOf("cart")>-1){var y=[];let e={operationName:"GetCart",variables:{},query:"query GetCart($shippingAddress: ShippingAddressInput) {\n  cart(shippingAddress: $shippingAddress) {\n    ...CartFields\n    __typename\n  }\n}\n\nfragment CartFields on Cart {\n  lineItems {\n    id\n    isQuantityEditable\n    isDigital\n    gaCode\n    quantity\n    total {\n      amount\n      currency\n      __typename\n    }\n    totalShipping {\n      amount\n      currency\n      __typename\n    }\n    undiscountedTotal {\n      amount\n      currency\n      __typename\n    }\n    details {\n      options\n      type\n      imageUrl\n      inventoryItemId\n      blankItemId\n      price {\n        amount\n        currency\n        __typename\n      }\n      marketingProductTypeId\n      marketingSku\n      productTypeId\n      productUrl\n      __typename\n    }\n    work {\n      id\n      title\n      artistName\n      __typename\n    }\n    __typename\n  }\n  summary {\n    showTaxSeparately\n    lineItemsCount\n    tax {\n      amount\n      currency\n      type\n      __typename\n    }\n    total {\n      amount\n      currency\n      __typename\n    }\n    subtotal {\n      amount\n      currency\n      __typename\n    }\n    undiscountedSubtotal {\n      amount\n      currency\n      __typename\n    }\n    shipping {\n      countryCode\n      countryName\n      estimated {\n        standard {\n          price {\n            amount\n            currency\n            __typename\n          }\n          tax {\n            amount\n            currency\n            type\n            __typename\n          }\n          amountExTax\n          __typename\n        }\n        express {\n          price {\n            amount\n            currency\n            __typename\n          }\n          tax {\n            amount\n            currency\n            type\n            __typename\n          }\n          amountExTax\n          __typename\n        }\n        __typename\n      }\n      selected {\n        estimatedCost {\n          price {\n            amount\n            currency\n            __typename\n          }\n          tax {\n            amount\n            currency\n            type\n            __typename\n          }\n          amountExTax\n          __typename\n        }\n        method\n        __typename\n      }\n      totals {\n        standard {\n          amount\n          currency\n          __typename\n        }\n        express {\n          amount\n          currency\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    digitalProductsOnly\n    __typename\n  }\n  appliedCoupon {\n    code\n    type\n    displayName\n    discount {\n      currency\n      amount\n      __typename\n    }\n    expiryDate\n    __typename\n  }\n  messages {\n    actionUrl\n    applied\n    severity\n    text\n    type\n    productName\n    __typename\n  }\n  __typename\n}\n"};fetch("https://www.redbubble.com/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e.data.cart.lineItems.forEach((function(t){var n={artist_name:t.work?t.work.artistName:"",blank_item_id:t.details?t.details.blankItemId:"",brand:"Redbubble",categories:[t.details?t.details.type:""],coupon:e.data.cart.appliedCoupon?e.data.cart.appliedCoupon:"",currency:t.total?t.total.currency:"",id:t.details?t.details.marketingProductTypeId:"",imageUrl:t.details?t.details.imageUrl:"",image_url:t.details?t.details.imageUrl:"",is_licensed:!1,is_safe_for_work:!0,name:t.work?t.work.title:"",price:t.details?t.details.price.amount:0,product_type_id:t.details?t.details.productTypeId:"",quantity:t.quantity?t.quantity:1,sku:t.details?t.details.marketingSku:"",url:t.details?t.details.productUrl:"",variant:t.details?t.details.blankItemId:"",work_id:t.work?t.work.id:"",work_title:t.work?t.work.title:""};y.push(n)})),o.log("==shoppingCart=="),o.log(y),localStorage.setItem("digioh_abandon_cart",JSON.stringify({shoppingCartItems:y}))})).catch((function(e){o.log(e)}))}}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnDocumentReady"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}var _,I;return!0},runCustomJsBeforeLightboxDisplay:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsBeforeLightboxDisplay"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}return!0},runCustomJsOnLightboxDisplay:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxDisplay"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnChangePages:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnChangePages"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxSubmit:function(e,t,n,r,a,o,i){try{var s={};s.log=DIGIOH_CUSTOM_JS.log,s.log("after box submit")}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxSubmit"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxRedirect:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxRedirect"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxDownload:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxDownload"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxClose:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxClose"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},log:function(e){DLOG.log(e,"CUSTOM_JS_PARENT")},logError:function(e,t){try{DLOG.log(e.message,"CUSTOM_JS_PARENT."+t+"()"),DLOG.logErrorFromCustomJsParent(e,"CUSTOM_JS_PARENT."+t)}catch(e){e.message="DIGIOH: Custom JS Parent -- "+e.message,window.console.error(e)}}},DIGIOH_CUSTOM_JS_SUPER={runCustomJsOnDocumentReady:function(e,t,n,r,a){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnDocumentReady"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}return!0},runCustomJsBeforeLightboxDisplay:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsBeforeLightboxDisplay"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}return!0},runCustomJsOnLightboxDisplay:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxDisplay"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnChangePages:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnChangePages"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxSubmit:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxSubmit"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxRedirect:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxRedirect"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxDownload:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxDownload"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxClose:function(e,t,n,r,a,o,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxClose"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},log:function(e){try{DLOG.log(e,"CUSTOM_JS_GLOBAL")}catch(e){e.message="DIGIOH: Custom JS Global -- "+e.message,window.console.error(e)}},logError:function(e,t){try{DLOG.log(e.message,"CUSTOM_JS_GLOBAL."+t+"()"),DLOG.logErrorFromCustomJsParent(e,"CUSTOM_JS_GLOBAL."+t)}catch(e){e.message="DIGIOH: Custom JS Global -- "+e.message,window.console.error(e)}}};